var inp=document.querySelector("input"),cont=document.querySelector(".container"),mc=document.querySelector(".mc"),mr=document.querySelector(".mr"),mp=document.querySelector(".mp"),mm=document.querySelector(".mm"),ms=document.querySelector(".ms"),letterM=document.querySelector(".let_m"),memorySum=0,percent=document.querySelector(".percent"),pow=document.querySelector(".pow"),multiply=document.querySelector(".multiply"),minus=document.querySelector(".minus"),plus=document.querySelector(".plus"),divide=document.querySelector(".divide"),dot=document.querySelector(".dot-btn"),equal=document.querySelector(".equal"),isResult=!1,square=document.querySelector(".sqrt"),invprop=document.querySelector(".invprop"),changeSign=document.querySelector(".negative"),ce=document.querySelector(".inp-clear"),c=document.querySelector(".clear"),del=document.querySelector(".delete"),expAnyLastNumber=/(\d+)$|(\d+\.\d+)$|(-\d+)$|(-\d+\.\d+)$/,expLastNum=/(\d+)$/,expPosNum=/(\d+\.\d+)$|(\d+)$/,expNegNum=/(-\d+)$/,expLastPow=/(□ \d+)$/,expLastSpace=/(\s)$/,expLastZero=/^(0)$|(\s0)$/;function checkLastZero(e,n){expLastZero.test(e)?inp.value=inp.value.substring(0,e.length-1)+n:inp.value=e+n}function checkInpLength(e){var n=e.match(/\d+/g),t=0;if(n){for(var u=0,i=n;u<i.length;u++){t+=i[u].length}if(t>=10)return!0}}function countingPow(e,n){if(void 0===n&&(n=null),expLastPow.test(e)){var t=e.match(/((\d+|\d+\.\d+) (□) (\d+))$/);n?setTimeout((function(){inp.value=e.substring(0,e.length-t[0].length)+Math.pow(parseFloat(t[2]),parseInt(t[4]))}),10):inp.value=e.substring(0,e.length-t[0].length)+Math.pow(parseFloat(t[2]),parseInt(t[4]))}}function countingMemory(e,n){if(expAnyLastNumber.test(n)){var t=n.match(expAnyLastNumber),u=parseFloat(t[0]);"+"===e?memorySum+=u:memorySum-=u}}function saveMemoryHelper(e){if(!(e.length>=15)){var n=e.match(expAnyLastNumber);memorySum=parseFloat(n[0]),letterM.style.display="block"}}function checkResLength(e,n){var t=inp.value.length;inp.value=n<1?inp.value.substring(0,t-e)+n.toFixed(3):inp.value.substring(0,t-e)+Math.round(n)}function defaultChecks(e){return!!expLastPow.test(e)||(!!isResult||void 0)}function checkLastNum(e){return 0===e.length||(!!expLastSpace.test(e)||void 0)}function sortEqualArrays(e,n,t){var u=e.indexOf(t),i=0;"×"===t&&(i=parseFloat(n[u])*parseFloat(n[u+1])),"/"===t&&(i=parseFloat(n[u])/parseFloat(n[u+1])),"%"===t&&(i=parseFloat(n[u])/100*parseFloat(n[u+1])),"+"===t&&(i=parseFloat(n[u])+parseFloat(n[u+1])),"-"===t&&(i=parseFloat(n[u])-parseFloat(n[u+1])),n.splice(u,2),e.splice(u,1),n.splice(u,0,i.toString())}function enteringNum(e){checkInpLength(inp.value)||isResult||e.target.classList.contains("num_btn")&&checkLastZero(inp.value,e.target.innerText)}function enteringDot(){defaultChecks(inp.value)||expLastNum.test(inp.value)&&!/(\d+\.\d+)$|(\d+\.)$/.test(inp.value)&&(inp.value=inp.value+".")}function clearMemory(){memorySum=0,letterM.style.display="none"}function plusMemory(){expAnyLastNumber.test(inp.value)&&"none"===getComputedStyle(letterM).display&&saveMemoryHelper(inp.value),countingMemory("+",inp.value)}function minusMemory(){countingMemory("-",inp.value)}function saveMemory(){expAnyLastNumber.test(inp.value)&&saveMemoryHelper(inp.value)}function readMemory(){inp.value=memorySum.toString().substring(0,15)}function enteringSign(e,n){void 0===e&&(e=null),void 0===n&&(n=null),checkInpLength(inp.value)||expLastNum.test(inp.value)&&inp.value.length>0&&(countingPow(inp.value),inp.value=n?inp.value+" "+n+" ":inp.value+" "+e.target.innerText+" ")}function countingSquare(){if(!defaultChecks(inp.value)&&expPosNum.test(inp.value)){var e=inp.value.match(expAnyLastNumber);if(parseInt(e[0])<0)return;checkResLength(e[0].length,Math.sqrt(parseFloat(e[0])))}}function countingInvprop(){if(!defaultChecks(inp.value)&&expPosNum.test(inp.value)){var e=inp.value.match(expPosNum);checkResLength(e[0].length,1/parseFloat(e[0]))}}function changingSign(){if(!defaultChecks(inp.value)&&expPosNum.test(inp.value)){var e=inp.value.match(expAnyLastNumber),n=inp.value.length,t=e[0].length,u=parseFloat(e[0]);parseFloat(e[0])>0?inp.value=inp.value.substring(0,n-t)+-1*u:parseFloat(e[0])<0&&(inp.value=inp.value.substring(0,n-t)+Math.abs(u))}}function clearInp(){inp.value=""}function clearAll(){clearInp(),"block"===getComputedStyle(letterM).display&&clearMemory()}function clearOneSign(){var e=inp.value.length;if(isResult)clearInp(),isResult=!1;else if(expLastSpace.test(inp.value))inp.value=inp.value.substring(0,e-3);else if(expNegNum.test(inp.value)){var n=inp.value.match(expNegNum);inp.value=inp.value.substring(0,e-n[1].length)}else inp.value=inp.value.substring(0,e-1)}function equalListener(){if(0!==inp.value.length&&!/^(\d+)$/.test(inp.value)&&!expLastSpace.test(inp.value))if(/^((\d+|\d+\.\d+) (□) (\d+))$/.test(inp.value))countingPow(inp.value,!0);else{countingPow(inp.value);var e=inp.value.match(/(\d+\.\d+)|(-\d+\.\d+)|(\d+)|(-\d+)/g),n=inp.value.match(/[-+%×/]/g);!function(){for(var t=0;t<=n.length+6;t++)n.includes("×")&&!n.includes("/")||n.includes("×")&&n.indexOf("×")<n.indexOf("/")?sortEqualArrays(n,e,"×"):n.includes("/")&&!n.includes("×")||n.includes("/")&&n.indexOf("/")<n.indexOf("×")?sortEqualArrays(n,e,"/"):n.includes("%")&&!n.includes("×")&&!n.includes("/")||n.includes("%")&&n.indexOf("%")<n.indexOf("×")&&n.indexOf("/")?sortEqualArrays(n,e,"%"):n.includes("+")&&!n.includes("-")||n.includes("+")&&n.indexOf("+")<n.indexOf("-")?sortEqualArrays(n,e,"+"):(n.includes("-")&&!n.includes("+")||n.includes("-")&&n.indexOf("-")<n.indexOf("+"))&&sortEqualArrays(n,e,"-")}(),setTimeout((function(){inp.value=e[0]}),10),isResult=!0}}cont.onclick=enteringNum,dot.onclick=enteringDot,mc.onclick=clearMemory,mr.onclick=readMemory,mp.onclick=plusMemory,mm.onclick=minusMemory,ms.onclick=saveMemory,percent.onclick=enteringSign,divide.onclick=enteringSign,minus.onclick=enteringSign,plus.onclick=enteringSign,pow.onclick=function(){enteringSign(null,"□")},multiply.onclick=function(){enteringSign(null,"×")},square.onclick=countingSquare,invprop.onclick=countingInvprop,changeSign.onclick=changingSign,ce.onclick=clearInp,c.onclick=clearAll,del.onclick=clearOneSign,equal.onclick=equalListener;var pressed=[];function twoKeys(e,n){countingPow(inp.value),(pressed.includes("Shift")&&pressed.includes("+")||pressed.includes("%")||pressed.includes("*"))&&(inp.value=n+" "+e+" ")}function oneKey(e,n){countingPow(n),inp.value=inp.value+" "+e+" "}function checkLengthArr(){var e=pressed.length;e>0&&(pressed.length=e-1)}function keyDown(e){if("Backspace"===e.key&&clearOneSign(),"="===e.key||"Enter"===e.key){if(/^(\d+)$/.test(inp.value)||checkLastNum(inp.value))return;equalListener()}if(!checkInpLength(inp.value)){if(pressed.includes(e.key)||pressed.push(e.key),"0"===e.key||"1"===e.key||"2"===e.key||"3"===e.key||"4"===e.key||"5"===e.key||"6"===e.key||"7"===e.key||"8"===e.key||"9"===e.key){if(isResult)return;checkLastZero(inp.value,e.key)}checkLastNum(inp.value)||("*"===e.key&&oneKey("×",inp.value),"+"===e.key&&oneKey("+",inp.value),"-"===e.key&&oneKey("-",inp.value),"/"===e.key&&oneKey("/",inp.value),"+"===e.key&&twoKeys("+",inp.value),"%"===e.key&&twoKeys("%",inp.value),"*"===e.key&&twoKeys("×",inp.value),"."===e.key&&enteringDot())}}document.onkeydown=keyDown,document.onkeyup=checkLengthArr;
//# sourceMappingURL=Calculator.js.map