var container=document.querySelector(".container"),input=document.querySelector(".input__result"),mc=document.querySelector(".mc"),mr=document.querySelector(".mr"),mp=document.querySelector(".mp"),mm=document.querySelector(".mm"),ms=document.querySelector(".ms"),letterM=document.querySelector(".letter-m"),memorySum=0,percent=document.querySelector(".percent"),pow=document.querySelector(".pow"),multiply=document.querySelector(".multiply"),minus=document.querySelector(".minus"),plus=document.querySelector(".plus"),divide=document.querySelector(".divide"),dot=document.querySelector(".dot-btn"),equal=document.querySelector(".equal"),isResult=!1,square=document.querySelector(".sqrt"),invprop=document.querySelector(".invprop"),changeSign=document.querySelector(".negative"),ce=document.querySelector(".inp-clear"),c=document.querySelector(".clear"),del=document.querySelector(".delete"),expAnyLastNumber=/(\d+)$|(\d+\.\d+)$|(-\d+)$|(-\d+\.\d+)$/,expLastNum=/(\d+)$/,expPosNum=/(\d+\.\d+)$|(\d+)$/,expNegNum=/(-\d+)$/,expLastPow=/(□ \d+)$/,expLastSpace=/(\s)$/;function checkLastZero(e,n){/^(0)$|(\s0)$/.test(e)?input.value=e.substring(0,e.length-1)+n:input.value=e+n}function checkInpLength(e){var n=e.match(/\d+/g),t=0;if(n){for(var u=0,i=n;u<i.length;u++){t+=i[u].length}if(t>=10)return!0}}function countingPow(e){if(expLastPow.test(e)){var n=e.match(/((\d+|\d+\.\d+) (□) (\d+))$/);input.value=e.substring(0,e.length-n[0].length)+Math.pow(Number(n[2]),Number(n[4]))}}function checkLastPow(e){if(expLastPow.test(e))return!0}function countingMemory(e,n){if(expAnyLastNumber.test(n)){var t=n.match(expAnyLastNumber),u=Number(t[0]);"+"===e?memorySum+=u:memorySum-=u}}function saveMemoryHelper(e){if(!checkInpLength(input.value)){var n=e.match(expAnyLastNumber);memorySum=Number(n[0]),letterM.style.display="block"}}function checkResLength(e,n){var t=input.value.length;input.value=n<1?input.value.substring(0,t-e)+n.toFixed(3):input.value.substring(0,t-e)+Math.round(n)}function checkLastNum(e){if(0===e.length||expLastSpace.test(e))return!0}function enteringSignKeyboardHelper(e){return input.value=input.value+" "+e+" ",isResult=!1,!0}function sortEqualArrays(e,n,t){var u=e.indexOf(t),i=Number(n[u]),r=Number(n[u+1]),c=0;"□"===t&&(c=Math.pow(i,r)),"×"===t&&(c=i*r),"/"===t&&(c=i/r),"%"===t&&(c=i/100*r),"+"===t&&(c=i+r),"- "===t&&(c=i-r),n.splice(u,2),e.splice(u,1),n.splice(u,0,c.toString())}function enteringDot(){checkLastPow(input.value)||isResult||expLastNum.test(input.value)&&!/(\d+\.\d+)$|(\d+\.)$/.test(input.value)&&(input.value=input.value+".")}function clearMemory(){memorySum=0,letterM.style.display="none"}function enteringSign(e,n){if(void 0===n&&(n=null),!checkInpLength(input.value)&&expLastNum.test(input.value)&&input.value.length>0){countingPow(input.value);var t=input.value;input.value=n?t+" "+n+" ":t+" "+e.target.innerText+" ",isResult=!1}}function clearInput(){input.value="",isResult=!1}function clearOneSign(){var e=input.value.length;if(isResult)input.value="",isResult=!1;else if(expLastSpace.test(input.value))input.value=input.value.substring(0,e-3);else if(expNegNum.test(input.value)){var n=input.value.match(expNegNum);input.value=input.value.substring(0,e-n[1].length)}else input.value=input.value.substring(0,e-1)}function equalListener(){if(0!==input.value.length&&!/^(\d+)$/.test(input.value)&&!expLastSpace.test(input.value)){var e=input.value.match(/(\d+\.\d+)|(-\d+\.\d+)|(\d+)|(-\d+)/g),n=input.value.match(/(- )|[+%×/□]/g);!function(){for(var t=0;t<=n.length+6;t++)n.includes("□")&&sortEqualArrays(n,e,"□"),n.includes("×")&&!n.includes("/")||n.includes("×")&&n.indexOf("×")<n.indexOf("/")?sortEqualArrays(n,e,"×"):n.includes("/")&&!n.includes("×")||n.includes("/")&&n.indexOf("/")<n.indexOf("×")?sortEqualArrays(n,e,"/"):n.includes("%")&&!n.includes("×")&&!n.includes("/")||n.includes("%")&&n.indexOf("%")<n.indexOf("×")&&n.indexOf("/")?sortEqualArrays(n,e,"%"):n.includes("+")&&!n.includes("- ")||n.includes("+")&&n.indexOf("+")<n.indexOf("- ")?sortEqualArrays(n,e,"+"):(n.includes("- ")&&!n.includes("+")||n.includes("- ")&&n.indexOf("- ")<n.indexOf("+"))&&sortEqualArrays(n,e,"- ")}(),setTimeout((function(){input.value=e[0],isResult=!0}))}}container.onclick=function(e){checkInpLength(input.value)||isResult||e.target.classList.contains("num_btn")&&checkLastZero(input.value,e.target.innerText)},dot.onclick=enteringDot,mp.onclick=function(){expAnyLastNumber.test(input.value)&&"none"===getComputedStyle(letterM).display&&saveMemoryHelper(input.value),countingMemory("+",input.value)},ms.onclick=function(){expAnyLastNumber.test(input.value)&&saveMemoryHelper(input.value)},mc.onclick=clearMemory,mr.onclick=function(){return input.value=memorySum.toString().substring(0,15)},mm.onclick=function(){return countingMemory("-",input.value)},percent.onclick=enteringSign,divide.onclick=enteringSign,minus.onclick=enteringSign,plus.onclick=enteringSign,pow.onclick=function(){return enteringSign(null,"□")},multiply.onclick=function(){return enteringSign(null,"×")},square.onclick=function(){if(!checkLastPow(input.value)&&expPosNum.test(input.value)){var e=input.value.match(expAnyLastNumber);if(Number(e[0])<0)return;checkResLength(e[0].length,Math.sqrt(Number(e[0])))}},invprop.onclick=function(){if(!checkLastPow(input.value)&&expPosNum.test(input.value)){var e=input.value.match(expPosNum);checkResLength(e[0].length,1/Number(e[0]))}},changeSign.onclick=function(){if(!checkLastPow(input.value)&&expPosNum.test(input.value)){var e=input.value.match(expAnyLastNumber),n=input.value.length,t=e[0].length,u=Number(e[0]);Number(e[0])>0?input.value=input.value.substring(0,n-t)+-1*u:input.value=input.value.substring(0,n-t)+Math.abs(u)}},ce.onclick=clearInput,c.onclick=function(){clearInput(),"block"===getComputedStyle(letterM).display&&clearMemory()},del.onclick=clearOneSign,equal.onclick=equalListener;var pressed=[];function enteringSignKeyboard(e,n){return countingPow(n),pressed.includes("Shift")&&pressed.includes("+")||pressed.includes("Shift")&&pressed.includes("%")||pressed.includes("Shift")&&pressed.includes("*"),enteringSignKeyboardHelper(e)}function checkLengthArr(){var e=pressed.length;e>0&&(pressed.length=e-1)}function keyDown(e){if("Backspace"===e.key&&clearOneSign(),"="===e.key||"Enter"===e.key){if(/^(\d+)$/.test(input.value)||checkLastNum(input.value))return;equalListener()}if(!checkInpLength(input.value)){if(pressed.includes(e.key)||pressed.push(e.key),"0"===e.key||"1"===e.key||"2"===e.key||"3"===e.key||"4"===e.key||"5"===e.key||"6"===e.key||"7"===e.key||"8"===e.key||"9"===e.key){if(isResult)return;checkLastZero(input.value,e.key)}if(!checkLastNum(input.value))return"*"===e.key?enteringSignKeyboard("×",input.value):"+"===e.key?enteringSignKeyboard("+",input.value):"-"===e.key?enteringSignKeyboard("-",input.value):"/"===e.key?enteringSignKeyboard("/",input.value):"+"===e.key?enteringSignKeyboard("+",input.value):"%"===e.key?enteringSignKeyboard("%",input.value):"*"===e.key?enteringSignKeyboard("×",input.value):void("."===e.key&&enteringDot())}}document.onkeydown=keyDown,document.onkeyup=checkLengthArr;
//# sourceMappingURL=Calculator.js.map